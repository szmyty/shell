#!/usr/bin/env bash
# lib/guards.sh
#
# Guard and assertion helpers.
# These functions return status codes and never exit.

# ------------------------------------------------------------------------------
# guard::has_command
#
# Returns 0 if the command exists, non-zero otherwise.
# ------------------------------------------------------------------------------
guard::has_command() {
  [[ $# -gt 0 ]] || return 1
  command -v "$1" >/dev/null 2>&1
}

# ------------------------------------------------------------------------------
# guard::is_interactive
#
# Returns 0 if shell is interactive.
# ------------------------------------------------------------------------------
guard::is_interactive() {
  case "$-" in
    *i*) return 0 ;;
    *) return 1 ;;
  esac
}

# ------------------------------------------------------------------------------
# guard::is_linux
# ------------------------------------------------------------------------------
guard::is_linux() {
  [[ "$(uname -s 2>/dev/null | tr '[:upper:]' '[:lower:]')" == "linux" ]]
}

# ------------------------------------------------------------------------------
# guard::file_exists
# ------------------------------------------------------------------------------
guard::file_exists() {
  [[ -f "$1" ]]
}

# ------------------------------------------------------------------------------
# guard::dir_exists
# ------------------------------------------------------------------------------
guard::dir_exists() {
  [[ -d "$1" ]]
}
